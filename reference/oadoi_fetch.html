<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="This is the main function to retrieve comprehensive open access status
information from Unpaywall data service. Please play nice with the API.
For each user, 100k calls per day are suggested. If you need to access
more data, there is also a data dump available.
For more info see https://unpaywall.org/products/snapshot."><title>Fetch open access status information and full-text links using Unpaywall — oadoi_fetch • roadoi</title><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://docs.ropensci.org/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Fetch open access status information and full-text links using Unpaywall — oadoi_fetch"><meta property="og:description" content="This is the main function to retrieve comprehensive open access status
information from Unpaywall data service. Please play nice with the API.
For each user, 100k calls per day are suggested. If you need to access
more data, there is also a data dump available.
For more info see https://unpaywall.org/products/snapshot."><meta property="og:image" content="https://docs.ropensci.org/roadoi/logo.png"><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Matomo --><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css"><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" data-cfasync="false"></script><script src="https://ropensci.org/scripts/matomo.js"></script><noscript><p><img src="https://ropensci.matomo.cloud/matomo.php?idsite=1&amp;rec=1" style="border:0;" alt=""></p></noscript><!-- End Matomo Code --></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    <a href="https://ropensci.org" class="external-link"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci"></a>
    <a class="navbar-brand me-2" href="../index.html">roadoi</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.7.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"></ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/intro.html">Introduction</a>
  </div>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ropensci/roadoi/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Fetch open access status information and full-text links using Unpaywall</h1>
      <small class="dont-index">Source: <a href="https://github.com/ropensci/roadoi/blob/HEAD/R/oadoi_fetch.r" class="external-link"><code>R/oadoi_fetch.r</code></a></small>
      <div class="d-none name"><code>oadoi_fetch.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This is the main function to retrieve comprehensive open access status
information from Unpaywall data service. Please play nice with the API.
For each user, 100k calls per day are suggested. If you need to access
more data, there is also a data dump available.
For more info see <a href="https://unpaywall.org/products/snapshot" class="external-link">https://unpaywall.org/products/snapshot</a>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">oadoi_fetch</span><span class="op">(</span></span>
<span>  dois <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  email <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"roadoi_email"</span><span class="op">)</span>,</span>
<span>  .progress <span class="op">=</span> <span class="st">"none"</span>,</span>
<span>  .flatten <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>dois</dt>
<dd><p>character vector, search by a single DOI or many DOIs.
A rate limit of 100k requests per day is suggested. If you need to access
more data, request the data dump
<a href="https://unpaywall.org/dataset" class="external-link">https://unpaywall.org/dataset</a> instead.</p></dd>


<dt>email</dt>
<dd><p>character vector, mandatory!
Unpaywall requires your email address,
so that they can track usage and notify you when something breaks.
Set email address in your `.Renviron` file with
the option
`roadoi_email` <code>options(roadoi_email = "najko.jahn@gmail.com")</code>.
You can open your `.Renviron` file calling `file.edit("~/.Renviron")`.
Save the file and restart your R session. To stop sharing your email
when using rcrossref, delete it from your `.Renviron` file.</p></dd>


<dt>.progress</dt>
<dd><p>Shows the <code>plyr</code>-style progress bar.
Options are "none", "text", "tk", "win", and "time".
See <code><a href="https://rdrr.io/pkg/plyr/man/create_progress_bar.html" class="external-link">create_progress_bar</a></code> for details
of each. By default, no progress bar is displayed.</p></dd>


<dt>.flatten</dt>
<dd><p>Simplify open access evidence output. If `TRUE` it
transforms the nested column oa_locations so that each open access
evidence variable has its own column and each row represents a
single full-text.
Following these basic principles of "Tidy Data" makes data analysis
and export as a spreadsheet more straightforward.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>The result is a tibble with each row representing a publication.
  Here are the returned columns and descriptions according to the API docu:</p>



<table class="table table"><tr><td><code>doi</code></td><td>DOI (always in lowercase).</td></tr><tr><td><code>best_oa_location</code></td><td>list-column describing the best OA location.
 Algorithm prioritizes publisher hosted content (eg Hybrid or Gold),
 then prioritizes versions closer to the  version of record (PublishedVersion
 over AcceptedVersion), then more authoritative  repositories (PubMed Central
 over CiteSeerX).</td></tr><tr><td><code>oa_locations</code></td><td>list-column of all the OA locations.</td></tr><tr><td><code>oa_locations_embargoed</code></td><td>list-column of
 locations expected to be available in the future based on
  information like license metadata and journals'
  delayed OA policies</td></tr><tr><td><code>data_standard</code></td><td>Indicates the data collection approaches used
 for this resource. <code>1</code> mostly uses Crossref for hybrid detection.
 <code>2</code> uses a more comprehensive hybrid detection methods.</td></tr><tr><td><code>is_oa</code></td><td>Is there an OA copy (logical)?</td></tr><tr><td><code>is_paratext</code></td><td>Is the item an ancillary part of a journal,
 like a table of contents? See here for more information
 <a href="https://support.unpaywall.org/support/solutions/articles/44001894783" class="external-link">https://support.unpaywall.org/support/solutions/articles/44001894783</a>.</td></tr><tr><td><code>genre</code></td><td>Publication type</td></tr><tr><td><code>oa_status</code></td><td>Classifies OA resources by location
 and license terms as one of: gold, hybrid, bronze, green or closed.
 See here for more information
 <a href="https://support.unpaywall.org/support/solutions/articles/44001777288-what-do-the-types-of-oa-status-green-gold-hybrid-and-bronze-mean-" class="external-link">https://support.unpaywall.org/support/solutions/articles/44001777288-what-do-the-types-of-oa-status-green-gold-hybrid-and-bronze-mean-</a>.</td></tr><tr><td><code>has_repository_copy</code></td><td>Is a full-text
 available in a repository?</td></tr><tr><td><code>journal_is_oa</code></td><td>Is the article published in a fully
 OA journal?</td></tr><tr><td><code>journal_is_in_doaj</code></td><td>Is the journal listed in
  the Directory of Open Access Journals (DOAJ).</td></tr><tr><td><code>journal_issns</code></td><td>ISSNs, i.e. unique numbers to identify
 journals.</td></tr><tr><td><code>journal_issn_l</code></td><td>Linking ISSN.</td></tr><tr><td><code>journal_name</code></td><td>Journal title, not normalized.</td></tr><tr><td><code>publisher</code></td><td>Publisher, not normalized.</td></tr><tr><td><code>published_date</code></td><td>Date published</td></tr><tr><td><code>year</code></td><td>Year published.</td></tr><tr><td><code>title</code></td><td>Publication title.</td></tr><tr><td><code>updated_resource</code></td><td>Time when the data for this resource was last updated.</td></tr><tr><td><code>authors</code></td><td>Lists author information (<code>family</code> name, <code>given</code>
 name and author role <code>sequence</code>), if available.</td></tr></table><p>The columns  <code>best_oa_location</code>. <code>oa_locations</code> and 
<code>oa_locations_embargoed</code> are list-columns that contain 
useful metadata about the OA sources found by Unpaywall.</p>


<p>If <code>.flatten = TRUE</code> the list-column <code>oa_locations</code> will be
restructured in a long format where each OA fulltext is represented by
one row.</p>


<p>These are:</p>


<table class="table table"><tr><td><code>endpoint_id</code></td><td>Unique repository identifier.</td></tr><tr><td><code>evidence</code></td><td>How the OA location was found and is characterized
  by Unpaywall?</td></tr><tr><td><code>host_type</code></td><td>OA full-text provided by <code>publisher</code> or
  <code>repository</code>.</td></tr><tr><td><code>is_best</code></td><td>Is this location the <code>best_oa_location</code> for its resource?</td></tr><tr><td><code>license</code></td><td>The license under which this copy is published,
  e.g. Creative Commons license.</td></tr><tr><td><code>pmh_id</code></td><td>OAI-PMH endpoint where we found this location.</td></tr><tr><td><code>repository institution</code></td><td>Hosting institution of the repository.</td></tr><tr><td><code>updated</code></td><td>Time when the data for this location was last updated.</td></tr><tr><td><code>url</code></td><td>The <code>url_for_pdf</code> if there is one; otherwise landing page URL.</td></tr><tr><td><code>url_for_landing_page</code></td><td>The URL for a landing page describing this OA copy.</td></tr><tr><td><code>url_for_pdf</code></td><td>The URL with a PDF version of this OA copy.</td></tr><tr><td><code>version</code></td><td>The content version accessible at this location
  following the DRIVER 2.0 Guidelines
 (<a href="https://wiki.surfnet.nl/display/DRIVERguidelines/DRIVER-VERSION+Mappings" class="external-link">https://wiki.surfnet.nl/display/DRIVERguidelines/DRIVER-VERSION+Mappings</a></td></tr></table><p>Note that Unpaywall schema is only informally described.
Check also <a href="https://unpaywall.org/data-format" class="external-link">https://unpaywall.org/data-format</a>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="fu">oadoi_fetch</span><span class="op">(</span><span class="st">"10.1038/nature12373"</span>, email <span class="op">=</span> <span class="st">"name@example.com"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">oadoi_fetch</span><span class="op">(</span>dois <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"10.1016/j.jbiotec.2010.07.030"</span>,</span></span>
<span class="r-in"><span><span class="st">"10.1186/1471-2164-11-245"</span><span class="op">)</span>, email <span class="op">=</span> <span class="st">"name@example.com"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># flatten OA evidence</span></span></span>
<span class="r-in"><span><span class="fu">roadoi</span><span class="fu">::</span><span class="fu">oadoi_fetch</span><span class="op">(</span>dois <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"10.1186/s12864-016-2566-9"</span>,</span></span>
<span class="r-in"><span>                            <span class="st">"10.1103/physreve.88.012814"</span>,</span></span>
<span class="r-in"><span>                            <span class="st">"10.1093/reseval/rvaa038"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   email <span class="op">=</span> <span class="st">"najko.jahn@gmail.com"</span>, .flatten <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start top-4 bottom-8">
            <div class="col-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg"></div>
            <div class="col-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="https://github.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-github"></div></a>
                        <a href="https://github.com/ropenscilabs" target="_blank" class="external-link"><div class="icon fa fa-flask"></div></a>
                        <a href="https://hachyderm.io/@ropensci" target="_blank" class="external-link"><div class="icon fab fa-mastodon"></div></a>
                        <a href="https://vimeo.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul><h5 class="bottom-2">About</h5>
                            <li><a href="https://ropensci.org/about" class="external-link">About rOpenSci</a></li>
                            <li><a href="https://ropensci.org/software-review" class="external-link">Software Review</a></li>
                            <li><a href="https://ropensci.org/about#team" class="external-link">Our Team</a></li>
                            <li><a href="https://ropensci.org/careers" class="external-link">Jobs</a></li>
                            <li><a href="https://ropensci.org/donate" class="external-link">Donate</a></li>
                            <li><a href="https://ropensci.org/contact" class="external-link">Contact Us</a></li>
                        </ul></div>
                    <div class="col-md-3 col-sm-4">
                        <ul><h5 class="bottom-2">Community</h5>
                            <li><a href="https://ropensci.org/community/" class="external-link">Our Community</a></li>
                            <li><a href="https://ropensci.org/commcalls/" class="external-link">Community calls</a></li>
                            <li><a href="https://ropensci.org/events/" class="external-link">Events</a></li>
                            <li><a href="https://discuss.ropensci.org/" class="external-link">Join the Discussion</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct" class="external-link">Code of conduct</a></li>
                        </ul></div>
                    <div class="col-md-2 col-sm-4">
                        <ul><h5 class="bottom-2">Resources</h5>
                            <li><a href="https://ropensci.org/packages/" class="external-link">Packages</a></li>
                            <li><a href="https://ropensci.org/usecases/" class="external-link">Use Cases</a></li>
                            <li><a href="https://ropensci.org/talks-papers/" class="external-link">Talks &amp; Publications</a></li>
                            <li><a href="https://docs.ropensci.org/" class="external-link">Documentation</a></li>
                            <li><a href="https://ropensci.org/news/" class="external-link">Newsletter</a></li>
                            <li><a href="https://ropensci.org/how-to-cite-ropensci/" class="external-link">Cite rOpenSci</a></li>
                        </ul></div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" class="external-link">NumFOCUS</a>.</p>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->


    </footer></div>

  

  

  </body></html>

